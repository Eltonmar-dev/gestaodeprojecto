<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Sistema SPC{% endblock %}</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Ajuste para nÃ£o haver conflito de scroll entre sidebar e conteÃºdo */
        aside { overflow: hidden; }
    </style>
</head>
<body class="bg-gray-50">

    <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0" aria-label="Sidebar">
       <div class="h-full px-3 py-4 bg-gray-800 flex flex-col justify-between">
          
          <div>
              <a href="/" class="flex items-center ps-2.5 mb-5 text-white text-xl font-bold tracking-wider">
                  SISTEMA SPC
              </a>
              <ul class="space-y-2 font-medium">
                 <li>
                    <a href="{% url 'dashboard' %}" class="flex items-center p-2 text-white rounded-lg hover:bg-gray-700 group">
                       <span class="ms-3">ğŸ“Š Dashboard</span>
                    </a>
                 </li>
                 <li>
                    <a href="{% url 'lista_projetos' %}" class="flex items-center p-2 text-white rounded-lg hover:bg-gray-700 group">
                       <span class="ms-3">ğŸ“ Projetos</span>
                    </a>
                 </li>
                 <li>
                    <a href="{% url 'lista_biblioteca' %}" class="flex items-center p-2 text-white rounded-lg hover:bg-gray-700 group">
                       <span class="ms-3">ğŸ“š Biblioteca Digital</span>
                    </a>
                 </li>
                 {% if user.is_staff %}
                 <li class="pt-4 mt-4 border-t border-gray-700">
                    <a href="/admin/" target="_blank" class="flex items-center p-2 text-gray-400 rounded-lg hover:bg-gray-700 group text-sm">
                       <span class="ms-3">âš™ï¸ Painel de GestÃ£o</span>
                    </a>
                 </li>
                 {% endif %}
              </ul>
          </div>

          <div class="pt-4 mt-4 border-t border-gray-700">
              <div class="flex items-center p-2 mb-2 text-white">
                  <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center mr-3 text-xs font-bold">
                      {{ user.username|slice:":1"|upper }}
                  </div>
                  <div class="flex flex-col">
                      <span class="text-sm font-semibold truncate w-32">{{ user.username }}</span>
                      {% if user.is_superuser %}
                          <span class="text-[9px] text-red-400 font-bold uppercase tracking-tighter">Administrador</span>
                      {% else %}
                          <span class="text-[9px] text-green-400 font-bold uppercase tracking-tighter">Gestor SPC</span>
                      {% endif %}
                  </div>
              </div>
              
              <form action="{% url 'logout' %}" method="post">
                  {% csrf_token %}
                  <button type="submit" class="w-full text-left p-2 text-red-400 rounded-lg hover:bg-gray-900 transition-colors font-medium flex items-center">
                     <span class="ms-1">ğŸšª Sair do Sistema</span>
                  </button>
              </form>
          </div>

       </div>
    </aside>

    <div class="p-4 sm:ml-64 min-h-screen">
       <div class="p-4 bg-white border border-gray-200 rounded-xl shadow-sm min-h-[calc(100vh-2rem)]">
          {% block content %}
          {% endblock %}
       </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
</body>
</html>